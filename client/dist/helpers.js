"use strict";var _interopRequireDefault=require("@babel/runtime/helpers/interopRequireDefault");require("core-js/modules/es.object.define-property.js");Object.defineProperty(exports,"__esModule",{value:!0}),exports.formattedWalletAddress=exports.disconnectUser=exports.contactButtonClicked=exports.appMessage=exports.appError=void 0,exports.openInNewTab=openInNewTab,require("core-js/modules/es.array.concat.js");var _regenerator=_interopRequireDefault(require("@babel/runtime/regenerator")),_asyncToGenerator2=_interopRequireDefault(require("@babel/runtime/helpers/asyncToGenerator")),_antd=require("antd"),_axios=require("../helpers/axios/axios"),_web=_interopRequireDefault(require("web3"));function openInNewTab(a){window.open(a,"_blank")}var appMessage=function(a){return _antd.message.info({content:a,className:"messageAntd"})};exports.appMessage=appMessage;var appError=function(a){return _antd.message.error({content:a,className:"messageAntd"})};exports.appError=appError;var disconnectUser=/*#__PURE__*/function(){var a=(0,_asyncToGenerator2.default)(/*#__PURE__*/_regenerator.default.mark(function a(){return _regenerator.default.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,_axios.axiosUser.post("/api/user/logoutUser");case 2:window.location.href="/";case 3:case"end":return a.stop();}},a)}));return function(){return a.apply(this,arguments)}}();exports.disconnectUser=disconnectUser;var formattedWalletAddress=function(a){var b=a.substring(0,5),c=a.length,d=a.substring(c-4,c);return"".concat(b,"...").concat(d)};exports.formattedWalletAddress=formattedWalletAddress;var contactButtonClicked=/*#__PURE__*/function(){var a=(0,_asyncToGenerator2.default)(/*#__PURE__*/_regenerator.default.mark(function c(a,b){var d,e,f;return _regenerator.default.wrap(function(c){for(;;)switch(c.prev=c.next){case 0:if(d=a.senderAddress,e=a.receiverAddress,e){c.next=3;break}return c.abrupt("return",appError("User address not found"));case 3:if(d){c.next=5;break}return c.abrupt("return",appMessage("Connect Wallet"));case 5:if(_web.default.utils.isAddress(e)){c.next=7;break}return c.abrupt("return",appError("Invalid Address"));case 7:if(d.toLowerCase()!==e.toLowerCase()){c.next=9;break}return c.abrupt("return",appMessage("Can't message yourself"));case 9:return c.next=11,_axios.axiosChat.post("/getConversation",{addresses:[e,d],address:d});case 11:if(f=c.sent.data,f){c.next=16;break}return c.next=15,_axios.axiosChat.post("/createConversation",{addresses:[e,d],address:d});case 15:f=c.sent.data;case 16:f?b({address:e,page:"messagepage",userConversation:f}):appError("Something went wrong"),console.log(f);case 18:case"end":return c.stop();}},c)}));return function(){return a.apply(this,arguments)}}();exports.contactButtonClicked=contactButtonClicked;